<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.state.dao.org.OrgDepartDaoI">

	<insert id="insert" parameterType="OrgDepartPo">
		INSERT INTO <include refid='public.model' /> ORG_DEPART(
		ID_,
		DEPART_ID_,
		DEPART_NAME_,
		SORT_,
		AREA_,
		ADD_NAME_,
		ADD_NAME_CN_,
		DOC_CREATED_,
		REMARK_) VALUES(
		#{id ,jdbcType=VARCHAR},
		#{departId ,jdbcType=VARCHAR},
		#{departName ,jdbcType=VARCHAR},
		#{sort ,jdbcType=INTEGER},
		#{area ,jdbcType=VARCHAR},
		#{addName, jdbcType=VARCHAR},
		#{addNameCn, jdbcType=VARCHAR},
		#{docCreated, jdbcType=TIMESTAMP},
		#{remark, jdbcType=VARCHAR}
		)
	</insert>
	
	<update id="update" parameterType="OrgDepartPo">
    update <include refid='public.model' /> ORG_DEPART set
      DEPART_ID_ = #{departId, jdbcType=INTEGER},
      Depart_NAME_ = #{departName, jdbcType=VARCHAR},
      SORT_ = #{DepartDesc, jdbcType=INTEGER},
      AREA_ = #{isSys, jdbcType=VARCHAR},
      LAST_MODIFIER_ = #{lastModifier, jdbcType=VARCHAR},
      LAST_MODIFIER_CN_ = #{lastModifierCn, jdbcType=VARCHAR},
      LAST_MODIFIED_ = #{lastModified, jdbcType=TIMESTAMP},
      REMARK_ = #{remark, jdbcType=VARCHAR}
    where ID_ = #{id, jdbcType=VARCHAR}
  </update>
  <delete id="delete" parameterType="OrgDepartPo">
    delete from <include refid='public.model' /> ORG_DEPART where ID_ = #{id, jdbcType=VARCHAR}
  </delete>
	
	<resultMap id="orgDepartResultMap" type="OrgDepartPo">
    <id property="id" column="ID_" jdbcType="VARCHAR" />
    <result property="departId" column="DEPART_ID_" jdbcType="VARCHAR" />
    <result property="departName" column="DEPART_NAME_" jdbcType="VARCHAR" />
    <result property="area" column="AREA_" jdbcType="VARCHAR" />
    <result property="sort" column="SORT_" jdbcType="VARCHAR" />
  </resultMap>
	
	<select id="selectList"  resultMap="orgDepartResultMap">
   	select ID_ ,DEPART_ID_ ,DEPART_NAME_ ,AREA_,SORT_ from <include refid='public.model' /> ORG_DEPART 
   	<if test="isState == true">
        	where AREA_ = '国调'
    </if>
    <if test="isState != true">
        	where AREA_ != '国调'
    </if>
    and PARENT_ID_ = #{parentId, jdbcType=VARCHAR}
   	order by SORT_ 
  </select>
  
  <select id="selectOneByDepartId" parameterType="string" resultMap="orgDepartResultMap">
    select top 1 * from <include refid='public.model' /> ORG_Depart where DEPART_ID_ = #{departId, jdbcType=VARCHAR}
  </select>
	<select id="selectListByUser" parameterType="string" resultMap="orgDepartResultMap">
    select * from <include refid='public.model' /> ORG_DEPART where ID_ in (select DEPART_UID_ from <include refid='public.model' /> ORG_DEPART_USER where USER_UID_ = #{userUid, jdbcType=VARCHAR})
  </select>
</mapper>