<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.state.dao.UserDaoI">

	<select id="selectById" resultType="UserPo">
		select u.ID_ as id,u.USER_ID_ as userId,u.MNAME as mname,u.AREA as area,u.DTYPE as dtype,u.DROLE as drole,u.is_login islogin,u.auto_graph autoGraph,u.mkey as mkey from <include refid='public.model' /> CBPM_USER u where ID_=#{id, jdbcType=VARCHAR}
	</select>
	
	<select id="selectByUserIdOrUserName" resultType="UserPo">
		select u.ID_ as id from <include refid='public.model' /> CBPM_USER u where 1=1
		<if test="userId != null and userId !=''">
        	and USER_ID_ = #{userId, jdbcType=VARCHAR}
    	</if>
    	<if test="userName != null and userName !=''">
        	and MNAME = #{userName, jdbcType=VARCHAR}
    	</if>
	</select>
	<update id="update" parameterType="UserPo">
    update <include refid='public.model' /> CBPM_USER set
      LAST_MODIFIER_ = #{lastModifier, jdbcType=VARCHAR},
      LAST_MODIFIER_CN_ = #{lastModifierCn, jdbcType=VARCHAR},
      <if test="userId != null and userId !=''">
        	USER_ID_ = #{userId, jdbcType=VARCHAR},
      </if>
      <if test="mname != null and mname !=''">
        	MNAME = #{mname, jdbcType=VARCHAR},
      </if>
      <if test="mkey != null and mkey !=''">
        	MKEY = #{mkey, jdbcType=VARCHAR},
      </if>
      <if test="area != null and area !=''">
        	AREA = #{area, jdbcType=VARCHAR},
      </if>
      <if test="dtype != null and dtype !=''">
        	DTYPE = #{dtype, jdbcType=VARCHAR},
      </if>
      <if test="drole != null and drole !=''">
        	DROLE = #{drole, jdbcType=VARCHAR},
      </if>
       <if test="autoGraph != null and autoGraph !=''">
        	AUTO_GRAPH = #{autoGraph, jdbcType=VARCHAR},
      </if>
      LAST_MODIFIED_ = #{lastModified, jdbcType=TIMESTAMP}
      where
      ID_ = #{id, jdbcType=VARCHAR}
  </update>
  
  <insert id="insert">
		insert into <include refid='public.model' /> CBPM_USER (ID_,USER_ID_,mname,area,mkey,dtype,is_login,drole,ADD_NAME_,ADD_NAME_CN_,DOC_CREATED_,AUTO_GRAPH) values
		(
		#{id, jdbcType=VARCHAR},
		#{userId, jdbcType=VARCHAR},
		#{mname, jdbcType=VARCHAR},
		#{area, jdbcType=VARCHAR},
		#{mkey, jdbcType=VARCHAR},
		#{dtype, jdbcType=VARCHAR},
		'1',
		#{drole, jdbcType=VARCHAR},
		#{addName, jdbcType=VARCHAR},
		#{addNameCn, jdbcType=VARCHAR},
		#{docCreated, jdbcType=TIMESTAMP},
		#{autoGraph, jdbcType=VARCHAR}
		)
	</insert>
  
</mapper>