<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.state.dao.org.OrgRoleDaoI">

	<insert id="insert" parameterType="OrgRolePo">
		INSERT INTO <include refid='public.model' /> ORG_ROLE(ID_,
		ROLE_ID_,
		ROLE_NAME_,
		ROLE_TYPE_,
		ROLE_DESC_,
		ADD_NAME_,
		ADD_NAME_CN_,
		DOC_CREATED_,
		IS_SYS_,
		REMARK_) VALUES(
		#{id ,jdbcType=VARCHAR},
		#{roleId ,jdbcType=VARCHAR},
		#{roleName ,jdbcType=VARCHAR},
		#{roleType ,jdbcType=VARCHAR},
		#{roleDesc ,jdbcType=INTEGER},
		#{addName, jdbcType=VARCHAR},
		#{addNameCn, jdbcType=VARCHAR},
		#{docCreated, jdbcType=TIMESTAMP},
		#{isSys, jdbcType=VARCHAR},
		#{remark, jdbcType=VARCHAR}
		)
	</insert>
	
	<update id="update" parameterType="OrgRolePo">
    update <include refid='public.model' /> ORG_ROLE set
      ROLE_ID_ = #{roleId, jdbcType=INTEGER},
      ROLE_NAME_ = #{roleName, jdbcType=VARCHAR},
      ROLE_TYPE_ = #{roleType, jdbcType=VARCHAR},
      ROLE_DESC_ = #{roleDesc, jdbcType=INTEGER},
      IS_SYS_ = #{isSys, jdbcType=BOOLEAN},
      LAST_MODIFIER_ = #{lastModifier, jdbcType=VARCHAR},
      LAST_MODIFIER_CN_ = #{lastModifierCn, jdbcType=VARCHAR},
      LAST_MODIFIED_ = #{lastModified, jdbcType=TIMESTAMP},
      REMARK_ = #{remark, jdbcType=VARCHAR}
    where ID_ = #{id, jdbcType=VARCHAR}
  </update>
  <delete id="delete" parameterType="OrgRolePo">
    delete from <include refid='public.model' /> ORG_ROLE where ID_ = #{id, jdbcType=VARCHAR}
  </delete>
	
	<resultMap id="orgRoleResultMap" type="OrgRolePo">
    <id property="id" column="ID_" jdbcType="VARCHAR" />
    <result property="roleId" column="ROLE_ID_" jdbcType="VARCHAR" />
    <result property="roleName" column="ROLE_NAME_" jdbcType="VARCHAR" />
    <result property="roleDesc" column="ROLE_DESC_" jdbcType="VARCHAR" />
    <result property="roleType" column="ROLE_TYPE_" jdbcType="VARCHAR" />
    <result property="isSys" column="IS_SYS_" jdbcType="INTEGER" />
    <result property="type" column="TYPE_" jdbcType="INTEGER" />
  </resultMap>
	
	<select id="selectListByIsSys" resultMap="orgRoleResultMap">
   	select ID_ ,ROLE_ID_ ,ROLE_NAME_ ,ROLE_DESC_ from <include refid='public.model' /> ORG_ROLE where IS_SYS_ = #{isSys, jdbcType=INTEGER} and ROLE_TYPE_=#{type, jdbcType=VARCHAR} order by ROLE_DESC_ 
  </select>
  
  <select id="selectList" parameterType="int" resultMap="orgRoleResultMap">
   	select ID_ ,ROLE_ID_ ,ROLE_NAME_ ,ROLE_DESC_,TYPE_ from <include refid='public.model' /> ORG_ROLE where IS_SYS_ = #{isSys, jdbcType=INTEGER} order by ROLE_DESC_ 
  </select>
  
  <select id="selectOneByRoleId" parameterType="string" resultMap="orgRoleResultMap">
    select top 1 * from <include refid='public.model' /> ORG_ROLE where ROLE_ID_ = #{roleId, jdbcType=VARCHAR}
  </select>
	<select id="selectListByUser" parameterType="string" resultMap="orgRoleResultMap">
    select * from <include refid='public.model' /> ORG_ROLE where ID_ in (select ROLE_UID_ from <include refid='public.model' /> ORG_USER_ROLE where USER_UID_ = #{userUid, jdbcType=VARCHAR})
  </select>
</mapper>